package com.leave;

public abstract class LeaveRequest implements Approvable {

	protected int requestId;
	protected Employee employee;
	protected String startDate;
	protected String endDate;
	protected String status;

	public LeaveRequest(int requestId, Employee employee, String startDate, String endDate, String status) {
		super();
		this.requestId = requestId;
		this.employee = employee;
		this.startDate = startDate;
		this.endDate = endDate;
		this.status = status;
	}
	
	
	public class StatusChange {
        private String oldStatus;
        private String newStatus;
        private String changeDate;
        private String changedBy;
        
        public StatusChange(String oldStatus, String newStatus, 
                          String changeDate, String changedBy) {
            this.oldStatus = oldStatus;
            this.newStatus = newStatus;
            this.changeDate = changeDate;
            this.changedBy = changedBy;
        }

		public String getOldStatus() {
			return oldStatus;
		}

		public String getNewStatus() {
			return newStatus;
		}

		public String getChangeDate() {
			return changeDate;
		}

		public String getChangedBy() {
			return changedBy;
		}
        
        
    }
	
	
	 public void changeStatus(String newStatus, String changedBy) {
	        String oldStatus = this.status;
	        this.status = newStatus;
	        
	        // Create a new status change record
	        StatusChange change = new StatusChange(
	            oldStatus, newStatus, getCurrentDate(), changedBy);
	        statusHistory.add(change);
	    }
	

	public int getRequestId() {
		return requestId;
	}

	public void setRequestId(int requestId) {
		this.requestId = requestId;
	}

	public Employee getEmployee() {
		return employee;
	}

	public void setEmployee(Employee employee) {
		this.employee = employee;
	}

	public String getStartDate() {
		return startDate;
	}

	public void setStartDate(String startDate) {
		this.startDate = startDate;
	}

	public String getEndDate() {
		return endDate;
	}

	public void setEndDate(String endDate) {
		this.endDate = endDate;
	}

	public String getStatus() {
		return status;
	}

	public void setStatus(String status) {
		this.status = status;
	}

	public boolean processRequest() {
		// Basic request processing logic
		System.out.println("Processing generic leave request...");
		return true;
	}
	
	public abstract int calculateLeaveDays();

}