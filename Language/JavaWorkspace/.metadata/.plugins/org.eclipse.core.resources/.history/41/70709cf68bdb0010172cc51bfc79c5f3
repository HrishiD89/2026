package com.leave;

import java.time.LocalDate;
import java.time.format.DateTimeFormatter;
import java.time.temporal.ChronoUnit;

public class VacationLeaveRequest extends LeaveRequest {
	private boolean planned;
	private String destination;

	
	public VacationLeaveRequest(int requestId, Employee employee, String startDate, String endDate,boolean planned,String destination) {
		super(requestId,employee,startDate,endDate,"Vacation Leave");
		this.planned = planned;
		this.destination = destination;
	}
	
	public boolean isPlanned() {
		return planned;
	}
	
	public String getDestination() {
		return destination;
	}
	
	@Override
    public boolean processRequest() {
        if (!planned) {
            System.out.println("Vacation leave request is not properly planned!");
            return false;
        }
        System.out.println("Processing vacation leave request to " + destination + "...");
        return true;
    }

	@Override
	public boolean approve(String approverName) {
		this.status = "Approved";
		System.out.println("");
		return false;
	}

	@Override
	public boolean deny(String approverName, String reason) {
		// TODO Auto-generated method stub
		return false;
	}

	@Override
	public int calculateLeaveDays() {
		DateTimeFormatter formatter = DateTimeFormatter.ofPattern("yyyy-MM-dd");
		LocalDate start = LocalDate.parse(startDate,formatter);
		LocalDate end = LocalDate.parse(endDate,formatter);
		return (int) ChronoUnit.DAYS.between(start, end);
	}
}
